///////////////////////////////////////////////////////////////////////////////////////////////

#include <cassert>
#include <cmath>
#include <iostream>
#include <limits>
#include <type_traits>

///////////////////////////////////////////////////////////////////////////////////////////////
// TRAIT: определяем double
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename T>
struct is_double : std::false_type {};

template <>
struct is_double<double> : std::true_type {};

///////////////////////////////////////////////////////////////////////////////////////////////
// ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename T>
void add_if_double(double&, std::size_t&, T) {}

template <>
void add_if_double<double>(double& sum, std::size_t& count, double value)
{
    sum += value;
    ++count;
}

template <typename T>
void min_if_double(double&, T) {}

template <>
void min_if_double<double>(double& current, double value)
{
    current = std::min(current, value);
}

template <typename T>
void max_if_double(double&, T) {}

template <>
void max_if_double<double>(double& current, double value)
{
    current = std::max(current, value);
}


///////////////////////////////////////////////////////////////////////////////////////////////
// СУММА
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename... Args>
double sum(Args... args)
{
    double result = 0.0;
    std::size_t count = 0;

    (add_if_double<Args>(result, count, args), ...);

    return result;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// МИНИМУМ
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename... Args>
double min_value(Args... args)
{
    double result = std::numeric_limits<double>::infinity();

    (min_if_double<Args>(result, args), ...);

    return result;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// МАКСИМУМ
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename... Args>
double max_value(Args... args)
{
    double result = -std::numeric_limits<double>::infinity();

    (max_if_double<Args>(result, args), ...);

    return result;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// СРЕДНЕЕ
///////////////////////////////////////////////////////////////////////////////////////////////

template <typename... Args>
double average(Args... args)
{
    double sum = 0.0;
    std::size_t count = 0;

    (add_if_double<Args>(sum, count, args), ...);

    return sum / count;
}

///////////////////////////////////////////////////////////////////////////////////////////////
// ТЕСТЫ
///////////////////////////////////////////////////////////////////////////////////////////////

int main()
{
    assert(sum(1.0, 2.0, 3.0) == 6.0);
    assert(min_value(5.0, 2.0, 8.0) == 2.0);
    assert(max_value(5.0, 2.0, 8.0) == 8.0);
    assert(average(2.0, 4.0, 6.0) == 4.0);

    assert(sum(1, 2.5, 'a', 3.5) == 6.0);
    assert(min_value(10, 4.5, 7.5, "text") == 4.5);
    assert(max_value(true, 1.5, 9.5, 3) == 9.5);
    assert(average(1, 2.0, 3, 4.0) == 3.0);

    std::cout << "All tests passed!\n";
}

///////////////////////////////////////////////////////////////////////////////////////////////
