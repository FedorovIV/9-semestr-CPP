///////////////////////////////////////////////////////////////////////////////////////////////

#include <climits>

///////////////////////////////////////////////////////////////////////////////////////////////
// ОСНОВНОЙ ШАБЛОН
///////////////////////////////////////////////////////////////////////////////////////////////

template <int N>
struct Fibonacci
{
    static_assert(N >= 0, "Fibonacci index must be non-negative");

    static constexpr int value =
        Fibonacci<N - 1>::value + Fibonacci<N - 2>::value;

    static_assert(
        value >= 0 && value <= INT_MAX,
        "Fibonacci value overflows int"
    );
};

///////////////////////////////////////////////////////////////////////////////////////////////
// ПОЛНЫЕ СПЕЦИАЛИЗАЦИИ
///////////////////////////////////////////////////////////////////////////////////////////////

template <>
struct Fibonacci<0>
{
    static constexpr int value = 0;
};

template <>
struct Fibonacci<1>
{
    static constexpr int value = 1;
};

///////////////////////////////////////////////////////////////////////////////////////////////
// ШАБЛОН-КОНСТАНТА ДЛЯ УДОБСТВА
///////////////////////////////////////////////////////////////////////////////////////////////

template <int N>
inline constexpr int Fibonacci_v = Fibonacci<N>::value;

///////////////////////////////////////////////////////////////////////////////////////////////
// ТЕСТЫ (static_assert)
///////////////////////////////////////////////////////////////////////////////////////////////

static_assert(Fibonacci_v<0> == 0);
static_assert(Fibonacci_v<1> == 1);
static_assert(Fibonacci_v<2> == 1);
static_assert(Fibonacci_v<3> == 2);
static_assert(Fibonacci_v<4> == 3);
static_assert(Fibonacci_v<5> == 5);
static_assert(Fibonacci_v<10> == 55);
static_assert(Fibonacci_v<12> == 144);

///////////////////////////////////////////////////////////////////////////////////////////////
